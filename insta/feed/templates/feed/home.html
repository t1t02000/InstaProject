

{% extends 'base.html' %}
{% block title %}Inicio | Instagram Clone{% endblock %}
{% block content %}
<h2>Feed</h2>
{% if posts %}
  {% for post in posts %}
    <div class="post">
      <div class="post-header">
        <a href="{% url 'feed:profile' post.author.username %}">
          <img src="{{ post.author.profile.profile_picture.url }}" class="profile-pic" width="40" height="40" style="border-radius:50%;vertical-align:middle;"> {{ post.author.username }}
        </a>
        <span style="float:right; color:#999; font-size:0.9em;">{{ post.created_at|date:"d M Y H:i" }}</span>
      </div>
      <div class="post-image">
        <img src="{{ post.image.url }}" alt="post image" style="width:100%;max-height:400px;object-fit:cover;">
      </div>
      <div class="post-caption">
        <b>{{ post.author.username }}</b> {{ post.caption }}
      </div>
      <div class="post-actions">
        <form action="{% url 'feed:like_post' post.pk %}" method="post" style="display:inline;">{% csrf_token %}
          <button type="submit">{% if user in post.likes.all %}‚ù§Ô∏è{% else %}ü§ç{% endif %}</button>
        </form>
        <span>{{ post.likes.count }} Me gusta</span>
        <a href="{% url 'feed:post_detail' post.pk %}">Ver comentarios ({{ post.comments.count }})</a>
      </div>
    </div>
    <hr>
  {% endfor %}
{% else %}
  <p>No hay publicaciones a√∫n.</p>
{% endif %}
<a href="{% url 'feed:create_post' %}" class="btn">Crear publicaci√≥n</a>
{% endblock %}
